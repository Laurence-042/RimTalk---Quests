# RimTalk-Quests

> **Dynamic AI-powered quest generation for RimWorld**

A RimWorld mod that extends [RimTalk](https://github.com/juicycleff/RimTalk) to generate context-aware, AI-powered quest descriptions using large language models.

## ğŸ“‹ About

RimTalk-Quests intercepts RimWorld's quest generation system and replaces static quest descriptions with dynamic, narrative-rich content generated by AI. By reusing RimTalk's model configuration and API infrastructure, this mod creates unique quest narratives that adapt to your colony's situation.

### Attribution

This mod is a **derivative work** based on **RimTalk** by [juicy](https://github.com/juicycleff/RimTalk).  
Licensed under [CC BY-NC-SA 4.0 International](http://creativecommons.org/licenses/by-nc-sa/4.0/).

## âœ¨ Features

- ğŸ¯ **AI-Generated Quest Descriptions** - Every quest becomes unique with contextually appropriate narratives
- ğŸ”„ **Seamless Integration** - Uses your existing RimTalk AI configuration
- ğŸ® **Context-Aware** - Descriptions adapt based on colony state, faction relationships, and quest history
- ğŸŒ **Multi-Model Support** - Works with Google Gemini, OpenAI-compatible APIs, and other models supported by RimTalk
- âš¡ **Real-time Streaming** - Watch quest descriptions appear in real-time with streaming generation
- ğŸ¨ **Rich Text Preservation** - Maintains RimWorld's color tags and formatting in generated content
- ğŸš€ **No Reflection** - Clean implementation using only public RimTalk APIs

## ğŸ“¦ Requirements

### Dependencies

1. **[Harmony](https://steamcommunity.com/sharedfiles/filedetails/?id=2009463077)** - Required for patching
2. **[RimTalk](https://steamcommunity.com/sharedfiles/filedetails/?id=3378714281)** - Must be installed and configured with an API key

### Compatibility

- RimWorld 1.5+
- RimWorld 1.6+ (tested)

## ğŸš€ Installation

1. Install **Harmony** from Steam Workshop or GitHub
2. Install **RimTalk** and configure it with your AI API key
3. Install **RimTalk-Quests** (this mod)
4. Ensure load order: `Harmony â†’ RimTalk â†’ RimTalk-Quests`

## âš™ï¸ Configuration

RimTalk-Quests uses your existing RimTalk settings:
- **API Key**: Configured in RimTalk settings
- **Model Selection**: Uses your RimTalk model choice (Gemini, OpenAI, etc.)
- **Rate Limits**: Respects RimTalk's API rate limiting

### Mod Settings

In-game mod settings allow you to:
- âœ… **Enable/Disable AI Descriptions** - Toggle AI-generated quest descriptions on/off
- ğŸ› **Verbose Debug Logging** - Enable detailed chunk-by-chunk streaming logs for troubleshooting
- ğŸ“Š **Processing Status** - View currently processing quest count

## ğŸ› ï¸ Development

### Building from Source

```powershell
# Set your RimWorld installation path
$env:RIMWORLD_DIR = "C:\Program Files (x86)\Steam\steamapps\common\RimWorld"

# Build the project
dotnet build RimTalkQuests.csproj

# Or build for a specific version
dotnet build RimTalkQuests.csproj /p:GameVersion=1.6
```

### Project Structure

```
RimTalk-Quests/
â”œâ”€â”€ About/              # Mod metadata
â”‚   â””â”€â”€ About.xml
â”œâ”€â”€ Source/             # C# source code
â”‚   â”œâ”€â”€ RimTalkQuestsMod.cs           # Main mod class
â”‚   â”œâ”€â”€ Patches/                       # Harmony patches
â”‚   â”‚   â””â”€â”€ QuestPatches.cs
â”‚   â””â”€â”€ Services/                      # Core services
â”‚       â””â”€â”€ QuestDescriptionGenerator.cs
â”œâ”€â”€ 1.5/Assemblies/     # Compiled DLL for RimWorld 1.5
â”œâ”€â”€ 1.6/Assemblies/     # Compiled DLL for RimWorld 1.6
â””â”€â”€ LICENSE             # CC BY-NC-SA 4.0 License
```

### Development Roadmap

- [x] Basic project structure and Harmony integration
- [x] RimTalk AI service integration (streaming support)
- [x] Context builder for quest information (scene + faction history)
- [x] Prompt engineering for quest descriptions
- [x] Real-time streaming generation with chunk callbacks
- [x] Settings UI for customization
- [x] Rich text (color tag) preservation
- [x] Reflection-free implementation using public APIs
- [ ] Performance optimization and caching
- [ ] Localization support
- [ ] Quest name AI generation (optional)

## ğŸ¤ Contributing

Contributions are welcome! Please note that this project inherits RimTalk's CC BY-NC-SA 4.0 license.

### Guidelines

- Maintain code quality and documentation
- Test with multiple quest types
- Respect API rate limits
- Follow RimWorld modding best practices

## ğŸ“„ License

This work is licensed under the **Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License**.

- **Attribution**: Based on RimTalk by juicy
- **NonCommercial**: Not for commercial use
- **ShareAlike**: Derivatives must use the same license

See [LICENSE](LICENSE) for full terms.

### Third-Party Licenses

- **RimTalk**: CC BY-NC-SA 4.0 by [juicy](https://github.com/juicycleff/RimTalk)
- **Harmony**: MIT License by [Andreas Pardeike](https://github.com/pardeike/Harmony)
- **RimWorld**: Proprietary license by Ludeon Studios

## ğŸ› Known Issues

- First-time setup requires RimTalk API key configuration
- Quest descriptions generate when quests appear (not instantly visible in some cases)
- Performance optimization and caching not yet implemented
- High quest volumes may impact API rate limits

## ğŸ“ Support

- **Issues**: [GitHub Issues](https://github.com/yourusername/RimTalk-Quests/issues)
- **RimTalk**: [Original RimTalk Repository](https://github.com/juicycleff/RimTalk)

## ğŸ™ Acknowledgments

- **juicy** - Creator of RimTalk, which this mod builds upon
- **Andreas Pardeike** - Creator of Harmony
- **Ludeon Studios** - RimWorld
- **RimWorld Modding Community** - Documentation and support

---

**Note**: This mod requires an active internet connection and valid API key (configured through RimTalk) to generate quest descriptions.
